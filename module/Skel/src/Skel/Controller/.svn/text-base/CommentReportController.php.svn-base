<?php

namespace Skel\Controller;

use Core\Controller\ReportController;
use Zend\View\Model\ViewModel;

/**
 * Controlador do relatório dos comentários
 * 
 * @category Skel
 * @package Controller
 * @author  Elton Minetto<eminetto@coderockr.com>
 */
class CommentReportController extends ReportController
{
    /**
     * Construtor para configurar o relatório
     */
    public function __construct()
    {
        $this->reportsPath = __DIR__ . '/../Report/';
        $this->reportFileName = 'comments';
        $this->reportName = 'Comments';
        $this->xPath = '/response/comments';
        parent::__construct();
    }

    /**
     * Mostra o formulário para o usuário
     * @return void
     */
    public function indexAction()
    {
        /**
         * Qualquer lógica é permitida aqui
         * Um exemplo é ler tabelas e montar uma lista de opções para o usuário
         * Na view também pode ser usado jQuery para acessar requisições via AJAX
         * e montar um formulário dinâmico e complexo
         */
        return new ViewModel();
    }

    /**
     * Método responsável por retornar um array com os dados a serem transformados em XML
     * Neste método consta a lógica do relatório
     * 
     * @param  array $params Parâmetros do processamento
     * @return array         Resultado do processamento
     */
    public function getData($params)
    {
        $service = $this->getService('Skel\Service\Post');
        $data = $service->getComments($params);
        return $data;
    }
}