<?php

namespace Skel\Controller;

use Core\Controller\ReportController;

/**
 * Controlador do relatório dos posts
 * 
 * @category Skel
 * @package Controller
 * @author  Elton Minetto<eminetto@coderockr.com>
 */
class PostReportController extends ReportController
{
    /**
     * Construtor para configurar o relatório
     */
    public function __construct()
    {
        $this->reportsPath = __DIR__ . '/../Report/';
        $this->reportFileName = 'posts';
        $this->reportName = 'Posts';
        $this->xPath = '/response/item';
        parent::__construct();
    }

    /**
     * Método responsável por retornar um array com os dados a serem transformados em XML
     * Neste método consta a lógica do relatório
     * 
     * @param  array $params Parâmetros do processamento
     * @return array         Resultado do processamento
     */
    public function getData($params)
    {
        $data  = $this->getTable('Skel\Model\Post')->fetchAll()->toArray();
        
        return $data;
    }
}